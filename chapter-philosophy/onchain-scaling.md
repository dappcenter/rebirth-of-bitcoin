# 链上扩容

在比特币和加密货币方面，不论是新手，还是经验丰富的老手，投资者们始终都在讨论的话题是比特币的运行机制。开发人员决定使用哪个平台；风投资本家决定哪个平台将来最有价值；比特币矿工在最赚钱的区块链上记录工作量证明（Proof-of-Work）；用户定位具有最佳的成本、速度和安全性的平台。

而比特币的运行，是比特币核心（BTC）和比特币现金（BCH）之间的较量，是小区块和大区块之间的抉择，也就是通过所谓的闪电网络（Lightning Network）建立支付渠道，还是通过链上扩容为地球上数十亿潜在用户提供可信赖、价格低廉且易于使用的点对点现金系统。

比特币创始人中本聪（Satoshi Nakamoto）、拥有多年经验的开发者加文 · 安德烈森（Gavin Andresen）以及麦克 · 赫恩（Mike Hearn）都对比特币扩容方案提出了非常明确的[建议](https://satoshi.nakamotoinstitute.org/posts/bitcointalk/126/)。其中根据[摩尔定律](https://bitcointalk.org/index.php?topic=149668.msg1596879#msg1596879)，链上扩容这一形式成就了今天的比特币。但这并非是我与其他许多人相信大区块和比特币现金（BCH）的根本原因。根本原因在于经济的本质。大区块是比特币扩容的唯一方法，任何其他扩容方案最后都会导致比特币区块链技术的终结。

通过本系列文章，我将介绍为何要通过大区块来保存比特币的区块链技术和愿景，尽力解释比特币运行的基本但必要的经济结构。任何反对大区块的行为都与经济学相悖。

## 比特币的激励结构

比特币是一个不断更新的数据库，受到共识机制的保护，需要所谓的矿工或节点执行大量计算，通过解决哈希难题拿到工作量证明（Proof-of-Work）。其中，处理能力最强的矿工最有可能解决难题并在区块链上添加区块，每个区块包含由用户签名并由节点中继的交易。由于工作量证明共识机制需要大量的精力投入，也就是成本投入，矿工享有两种货币激励措施，即通过工作量证明（Proof-of-Work）以电子货币的形式激励，保证网络运行：

1) 为添加区块的节点增加新币供给（目前[每个区块奖励 12.5 枚比特币](https://www.bitcoinmining.com/what-is-the-bitcoin-block-reward/)）
2) 用户选择的所有交易手续费总额（区块足够大的情况下，每笔手续费大约在一便士不到）

此外，更重要的是，每个节点还暗含着一个激励结构。由每个节点决定并（按计算能力）投票随后挖哪个区块，这不仅仅取决于谁先解决哈希难题，而是首先要确保交易有效，如果两笔相互冲突交易，则必须为排序靠前且有电子签名的一笔。

这对节点的 “行为” 有着很大的影响，因为在任何时候，所有节点都需注意到所有中继的交易，从而避免虚假或双重支付交易，这符合共同利益; 如果一个节点有意或无意地通过了欺诈性交易，其他节点便不会在这样一个欺诈性区块上挖掘。因为所有节点都需致力于区块链网络正常且诚实地运行，否则未来的收入岌岌可危。

如此就形成了一个高度互联的网络，每个节点都中继并处理所有接收到的有效交易，实现 Pareto 最优解。这一网络被称为一个小世界或一张近乎完整的图。简单说来，可以想象一下它以下列方式运行：

值得注意的是，这一过程只需几毫秒。时间对于节点来说至关重要，是一个主要成本因素; 如果一个节点未能完全更新 *，* 便有着成为孤儿的风险，其他节点可能决定不在这一节点开采的区块上挖矿，从而使其比特币奖励变得毫无价值。

比特币区块链的安全性恰恰源于这样一种网络效应：由于受到财务上的激励，最强大的节点开采速度高于网络中的其他任何节点，因此也不会选择违反游戏规则，只会记录有效交易。

## 有趣之处在于：比特币扩容

每 10 分钟生成一个区块，每 [4 年](https://www.bitcoinmining.com/what-is-the-bitcoin-block-reward/) 一个周期奖励减半。我们离下一次奖励减半，也就是 2020 年[左右](https://www.bitcoinmining.com/what-is-the-bitcoin-block-reward/)，越来越近了。由于新币奖励减少，矿工将越来越依赖于交易手续费总额的奖励。到最后，矿工的收益将全部来自手续费。

影响矿工是否愿意继续花费大量精力维护网络的方式有以下三种：

1. 用户是否愿意为交易支付持续上涨的交易手续费。
1. 不断为矿工发行新币，增加新币总量供给（鉴于比特币协议中约定的总量限制，这点不太可行）。
1. 增加每个区块的交易量，从而增加手续费总额。

对于所有人，包括购买力较弱的人来说，为维持比特币的非通货膨胀性质，比特币必须进行大量链上扩容。也就是说，区块链本身必须扩展。试想一下，如果链上每秒能发生数百万笔交易，矿工得到的货币激励就会随之而涨——反之也加强了网络的安全性。

但如果不采用大区块的方式扩容，而是像比特币核心（BTC）那样人为设定区块的上限容量，通过链下解决方案来实现扩容，如[闪电网络](https://lightning.network/lightning-network-paper.pdf)（Lightning Network），并不能带来类似于链上扩展的交易量，只会带来链上费用的不断增加或通货膨胀。闪电网络在链下扩容（假设可行）方面运用的越多，交易手续费会越高，或者通胀会越厉害，如此才能够满足节点运行所需的费用。

即使有些人决定自费提供节点，也更倾向于使用运算力强的节点在能触达上亿用户的区块链上挖矿，而非在一个区块大小有限的网络中开采——这将给网络带来巨大风险。

## 未来展望

在分析了比特币激励结构的基本性质之后，我们显然有两个选择，一边是越来越昂贵的网络、通胀的比特币以及不再安全的网络，另一边是通过链上扩容，实现快速、安全且低成本的网络——过去 10 年里，我们正是爱上了这样简朴的网络。不难想象，比特币核心（BTC）计划使用闪电网络作为唯一的扩容形式，将完全摆脱比特币区块链技术——因为比特币作为结算层只会成为交易障碍。但在所有这些场景中，哪一个听起来更像是《[比特币：点对点电子现金系统](https://bitcoin.org/bitcoin.pdf)》中描述的真正的比特币？

